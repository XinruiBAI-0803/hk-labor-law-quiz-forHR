<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›‡å‚­æ¢ä¾‹è‡ªè€ƒç³»çµ±</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ç‚ºäº†ç¢ºä¿æŒ‰éˆ•æ¨£å¼æ­£å¸¸ï¼Œé€™è£¡åŠ ä¸€é»åŸºç¤æ¨£å¼ï¼Œä»¥é˜² style.css æ²’åŠ è¼‰ */
        .options-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        .options-section button {
            padding: 12px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ddd;
            background-color: #fff;
            border-radius: 5px;
            transition: all 0.2s;
            text-align: left;
        }
        .options-section button:hover {
            background-color: #f0f0f0;
        }
        .options-section button.correct {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724;
        }
        .options-section button.wrong {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24;
        }
        .options-section button.disabled {
            pointer-events: none;
            opacity: 0.8;
        }
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #e2e3e5;
            border-radius: 5px;
        }
        .next-btn {
            display: none;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div class="quiz-container" style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <h1 style="text-align: center;">âš–ï¸ é›‡å‚­æ¢ä¾‹è‡ªè€ƒç³»çµ±</h1>
    
    <!-- é€²åº¦æ¢ -->
    <div style="margin-bottom: 15px; color: #7f8c8d; font-size: 14px; text-align: center;">
        é¡Œç›® <span id="current-q">1</span> / <span id="total-q">0</span>
    </div>

    <!-- é¡Œç›®å€åŸŸ -->
    <div id="quiz-box">
        <div class="question-section" id="question-text" style="font-size: 1.2em; font-weight: bold; margin-bottom: 10px; white-space: pre-line;">é¡Œç›®åŠ è¼‰ä¸­...</div>
        
        <!-- é¸é …å€åŸŸ -->
        <div class="options-section" id="options-box"></div>
    </div>

    <!-- è§£æå€åŸŸ -->
    <div class="explanation" id="explanation-box">
        <strong>ğŸ’¡ æ³•æ¢è§£æï¼š</strong>
        <p id="explanation-text" style="white-space: pre-line; margin-top: 5px;"></p>
    </div>

    <!-- ä¸‹ä¸€é¡ŒæŒ‰éˆ• -->
    <button class="next-btn" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â”</button>
</div>

<!-- å¼•å…¥æ•¸æ“š -->
<script src="data.js"></script>

<!-- é‚è¼¯è…³æœ¬ -->
<script>
    // 1. åˆå§‹åŒ–è®Šé‡
    let currentQuestionIndex = 0;
    let score = 0;
    
    // æª¢æŸ¥æ•¸æ“šæ˜¯å¦æˆåŠŸåŠ è¼‰
    if (typeof quizData === 'undefined') {
        alert("éŒ¯èª¤ï¼šç„¡æ³•è®€å– data.jsï¼Œè«‹ç¢ºä¿ data.js æ–‡ä»¶å­˜åœ¨ä¸”è®Šé‡åç‚º var quizData");
    }

    const totalQuestions = quizData.length;

    // 2. ç²å–é é¢å…ƒç´ 
    const currentQEl = document.getElementById('current-q');
    const totalQEl = document.getElementById('total-q');
    const questionTextEl = document.getElementById('question-text');
    const optionsBoxEl = document.getElementById('options-box');
    const explanationBoxEl = document.getElementById('explanation-box');
    const explanationTextEl = document.getElementById('explanation-text');
    const nextBtnEl = document.getElementById('next-btn');

    // åˆå§‹åŒ–é é¢é¡¯ç¤ºç¸½é¡Œæ•¸
    totalQEl.innerText = totalQuestions;
    
    // é–‹å§‹åŠ è¼‰ç¬¬ä¸€é¡Œ
    loadQuestion();

    // --- æ ¸å¿ƒå‡½æ•¸ï¼šåŠ è¼‰é¡Œç›® ---
    function loadQuestion() {
        // ç²å–ç•¶å‰é¡Œç›®æ•¸æ“š
        const currentData = quizData[currentQuestionIndex];
        
        // æ›´æ–°é€²åº¦
        currentQEl.innerText = currentQuestionIndex + 1;
        
        // é¡¯ç¤ºé¡Œç›®
        questionTextEl.innerText = currentData.question;
        
        // é‡ç½®ç‹€æ…‹ï¼ˆéš±è—è§£æã€éš±è—ä¸‹ä¸€é¡ŒæŒ‰éˆ•ã€æ¸…ç©ºé¸é …ï¼‰
        explanationBoxEl.style.display = 'none';
        nextBtnEl.style.display = 'none';
        optionsBoxEl.innerHTML = ''; 

        // ç”Ÿæˆé¸é …æŒ‰éˆ•
        currentData.options.forEach((optionText, index) => {
            const btn = document.createElement('button');
            btn.innerText = optionText;
            // é»æ“Šæ™‚è§¸ç™¼æª¢æŸ¥ï¼Œå‚³å…¥ï¼šè¢«é»çš„æŒ‰éˆ•ã€ç´¢å¼•ã€æ­£ç¢ºç­”æ¡ˆç´¢å¼•
            btn.onclick = () => checkAnswer(btn, index, currentData.correctIndex, currentData.explanation);
            optionsBoxEl.appendChild(btn);
        });
    }

    // --- æ ¸å¿ƒå‡½æ•¸ï¼šæª¢æŸ¥ç­”æ¡ˆ ---
    function checkAnswer(selectedBtn, selectedIndex, correctIndex, explanation) {
        const allButtons = optionsBoxEl.querySelectorAll('button');
        
        // 1. é–å®šæ‰€æœ‰æŒ‰éˆ•ï¼Œä¸èƒ½å†é»
        allButtons.forEach(btn => btn.classList.add('disabled'));

        // 2. åˆ¤æ–·å°éŒ¯
        if (selectedIndex === correctIndex) {
            // ç­”å°äº†
            selectedBtn.classList.add('correct');
            score++;
        } else {
            // ç­”éŒ¯äº†
            selectedBtn.classList.add('wrong');
            // è‡ªå‹•æŠŠæ­£ç¢ºç­”æ¡ˆæ¨™ç¶ 
            allButtons[correctIndex].classList.add('correct');
        }

        // 3. é¡¯ç¤ºè§£æ
        explanationTextEl.innerText = explanation;
        explanationBoxEl.style.display = 'block';

        // 4. é¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
        nextBtnEl.style.display = 'block';
        
        // å¦‚æœæ˜¯æœ€å¾Œä¸€é¡Œï¼ŒæŒ‰éˆ•æ–‡å­—æ”¹æˆã€ŒæŸ¥çœ‹æˆç¸¾ã€
        if (currentQuestionIndex === totalQuestions - 1) {
            nextBtnEl.innerText = "æŸ¥çœ‹æˆç¸¾ ğŸ";
        }
    }

    // --- æ ¸å¿ƒå‡½æ•¸ï¼šä¸‹ä¸€é¡Œ ---
    function nextQuestion() {
        if (currentQuestionIndex < totalQuestions - 1) {
            currentQuestionIndex++;
            loadQuestion();
        } else {
            showFinalScore();
        }
    }

    // --- æ ¸å¿ƒå‡½æ•¸ï¼šé¡¯ç¤ºæˆç¸¾ ---
    function showFinalScore() {
        document.querySelector('.quiz-container').innerHTML = `
            <div style="text-align:center; padding:40px;">
                <h1 style="font-size: 3em;">ğŸ‰</h1>
                <h2>æ¸¬è©¦å®Œæˆï¼</h2>
                <p style="font-size:24px; margin: 20px 0;">
                    ä½ çš„å¾—åˆ†ï¼š<strong style="color: #007bff;">${score}</strong> / ${totalQuestions}
                </p>
                <button class="next-btn" style="display:inline-block" onclick="location.reload()">å†åšä¸€æ¬¡</button>
            </div>
        `;
    }
</script>

</body>
</html>
